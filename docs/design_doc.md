# 应用设计文档：兰亭书签

## 1. 产品概述 (Project Overview)

### 1.1 定义

兰亭书签是一款基于 Tauri 构建的现代化本地书签管理工具，采用 Vue 3 构建高性能前端界面。它强调极简的视觉风格、流畅的本地交互体验和“隐私优先”的设计理念。

### 1.2 核心价值

- **轻量级**：极其紧凑的资源占用，快速启动。
- **本地化**：所有数据存储在本地 JSON 文件中，无需联网，隐私完全可控。
- **高效**：优化的拖拽交互和即时搜索，提升整理效率。

## 2. 功能详细设计 (Detailed Features)

### 2.1 书签管理系统 (Bookmark System)

- **极简新建流**：
  - **弹窗设计**：默认采用“小而美”的紧凑弹窗，核心显示 URL、标题、分类。
  - **渐进式交互**：标签与详细描述字段默认折叠，通过点击“更多选项”展开，减少认知负担。
  - **智能辅助**：URL 失去焦点时自动推测/域名作为标题（mvp方案）。
- **视图模式**：
  - **网格视图 (Grid)**：卡片式布局，强调视觉浏览。
  - **列表视图 (List)**：紧凑行式布局，适合高密度信息查找。
- **状态管理**：
  - **全部书签**：显示库中所有内容。
  - **未分类**：自动聚合没有归属文件夹的书签，方便定期整理。
  - **回收站**：提供删除内容的暂存区，防止误删。

### 2.2 文件夹与分类 (Folder & Organization)

- **文件夹操作**：
  - 支持创建、重命名、删除自定义文件夹。
  - 侧边栏实时显示各文件夹内的书签计数（Hover时或始终显示）。
- **拖拽交互 (Drag & Drop)**：
  - **书签归类**：支持从主视图将书签卡片拖拽至左侧文件夹导航项上进行移动。
  - **视觉反馈**：拖拽过程中，目标文件夹会以虚线边框+高亮底色提示，确保操作明确。
  - **限制**：目前文件夹自身的拖拽排序功能已暂时禁用，以保证点击交互的稳定性（待后续优化）。
- **滚动条优化**：
  - 使用自定义 CSS 样式模拟 macOS 风格的极细滚动条。
  - 滚动条在非交互状态下保持低调灰色，且移除了鼠标悬停时的变色干扰，保持界面纯净。

### 2.3 全局交互与 UI 组件

- **ConfirmModal (统一确认层)**：
  - 封装了通用的 `ConfirmModal` 组件替代原生浏览器 `alert/confirm`。
  - 风格与 DaisyUI 主题统一，支持 Warning/Error 不同级别的视觉提示。
  - 应用场景：删除文件夹、清空回收站、删除书签等破坏性操作。
- **无边框设计**：
  - 主内容区域移除多余边距，内容直抵窗口/滚动条边缘，最大化屏幕利用率。

## 3. 技术实现细节 (Implementation Details)

### 3.1 核心技术栈

- **App Shell**: Tauri (Rust)
- **Frontend**: Vue 3 (Composition API) + TypeScript
- **State**: Pinia (配合 `tauri-plugin-store` 实现持久化)
- **Styling**: Tailwind CSS + DaisyUI
- **Drag & Drop**: HTML5 Native API (需注意 `preventDefault` 处理)

### 3.2 关键组件结构

```
src/
  ├── components/
  │    ├── bookmarks/
  │    │    └── AddBookmarkModal.vue  # 新建/编辑弹窗 (支持折叠详情)
  │    ├── layout/
  │    │    └── Sidebar.vue           # 侧边栏 (包含文件夹逻辑与Drop区)
  │    └── common/
  │         └── ConfirmModal.vue      # 通用确认对话框
  ├── stores/
  │    └── bookmarks.ts               # 核心数据逻辑
```

## 4. 待优化项 (Pending Improvements)

- **拖拽排序恢复**：重构文件夹列表的拖拽逻辑，解决与点击事件的冲突。
- **图标获取服务**：引入更完善的 Favicon 获取服务，替代目前的 Google API 方案。
- **数据导出/导入**：标准的 Netscape HTML 书签格式支持。
